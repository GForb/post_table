{smcl}
{txt}{sf}{ul off}  - use "`dir'\eg_data2", clear
  = use "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\eg_data2", clear
  - local results pts_eg`eg_no'
  = local results pts_eg1.4
  - tempname postname
  - forvalues i = 1 (1) `cols' {c -(}
  = forvalues i = 1 (1) 6 {c -(}
  - local post_cols `post_cols' col`i'
  = local post_cols  col1
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3 col4
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3 col4 col5
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3 col4 col5 col6
  - {c )-}
  - qui postfile `namelist' str100(`post_cols') using "`dir'\\`results'.dta", replace
  = qui postfile __000003 str100(col1 col2 col3 col4 col5 col6) using "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\pts_eg1.4.dta", replace
  {hline 55} end pt_sum_intro {hline}

{com}. 
. 
. /***
> ###1.4 Decimals, variable names and comments.
> This is the table obtained using default settings with no additional options specified.
> ***/
. 
. 
. /***/ post `postname' ("") ("N") ("Mean (sd)") ("Median (IQR)") ("Range") ("Comment") 
{txt}
{com}. /***/ pt_sum age  , postname(`postname') stats(N mean_sd median_iqr range)  var_lab("Custom variable name") comment("The decimal option sets the decimal places") decimal(0) 
{txt}  {hline 59} begin pt_sum {hline}
  - syntax varlist(numeric) [if] [in] , POSTname(string) stats(namelist) [ over(varname) over_grps(numlist) overall(string) order(string) gap(integer 0) gap_end(integer 0) decimal(integer 1) range_decimal(integer 1) med_iqr_decimal(integer 1) append_label(string) var_lab(string) comment(string) ]
  - if "`if'" != "" | "`in'" != "" {c -(}
  = if "" != "" | "" != "" {c -(}
    preserve
    keep `if'
    {c )-}
  - if "`over'" != "" {c -(}
  = if "" != "" {c -(}
    if "`over_grps'" == "" levelsof `over', local(over_grps)
    if "`overall'" == "first" local over_grps overall `over_grps'
    if "`overall'" == "last" local over_grps `over_grps' overall
    {c )-}
  - if "`over'" == "" local over_grps overall
  = if "" == "" local over_grps overall
  - if "`order'" == "" local order group_over
  = if "" == "" local order group_over
  - local stats_list "N", "missing", "mean_sd", "median_iqr", "range"
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("N", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("mean_sd", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("median_iqr", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("range", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if `range_decimal' ==1 local range_decimal = `decimal'
  = if 1 ==1 local range_decimal = 0
  - if `med_iqr_decimal' ==1 local med_iqr_decimal = `decimal'
  = if 1 ==1 local med_iqr_decimal = 0
  - foreach v in `varlist' {c -(}
  = foreach v in age {c -(}
  - local var_label `var_lab'
  = local var_label Custom variable name
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "Custom variable name" == "" local var_label:variable label age
  - local var_label `var_label' `append_label'
  = local var_label Custom variable name 
  - local var_label ("`var_label'")
  = local var_label ("Custom variable name")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** age ******" _newline(1)



****** age ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su age, detail

                             Age
{hline 61}
      Percentiles      Smallest
 1%    {res}  21.8495       18.73607
{txt} 5%    {res} 28.19199        19.5597
{txt}10%    {res} 31.82518        19.6057       {txt}Obs         {res}      1,000
{txt}25%    {res} 37.72828       20.72693       {txt}Sum of Wgt. {res}      1,000

{txt}50%    {res} 44.58735                      {txt}Mean          {res} 44.75141
                        {txt}Largest       Std. Dev.     {res} 10.09038
{txt}75%    {res} 51.50417       70.68008
{txt}90%    {res} 58.11494       70.92197       {txt}Variance      {res} 101.8157
{txt}95%    {res} 62.07549       77.65178       {txt}Skewness      {res} .0845107
{txt}99%    {res} 67.92893       79.98365       {txt}Kurtosis      {res} 2.822212
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su age if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.0f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.0f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.0f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.0f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.0f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.0f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.0f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 45 (10)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 45 (38-52)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 19 - 80
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(age) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(age) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("1000")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("45 (10)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("45 (10)") ("45 (38-52)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("45 (10)") ("45 (38-52)") ("19 - 80")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "The decimal option sets the decimal places" != "" & "The decimal option sets the decimal places" != "no comment" local comment1 ("The decimal option sets the decimal places")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "The decimal option sets the decimal places" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000003 ("Custom variable name") ("1000") ("45 (10)") ("45 (38-52)") ("19 - 80") ("The decimal option sets the decimal places")
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "The decimal option sets the decimal places" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "The decimal option sets the decimal places" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "The decimal option sets the decimal places" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "The decimal option sets the decimal places" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - if `gap_end' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap_end' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - if "`if'" != "" | "`in'" != "" restore
  = if "" != "" | "" != "" restore
  {hline 61} end pt_sum {hline}

{com}. /***/ pt_sum  bmi  , postname(`postname') stats(N mean_sd median_iqr range) append_label("- you can add extra text") comment("no comment") 
{txt}  {hline 59} begin pt_sum {hline}
  - syntax varlist(numeric) [if] [in] , POSTname(string) stats(namelist) [ over(varname) over_grps(numlist) overall(string) order(string) gap(integer 0) gap_end(integer 0) decimal(integer 1) range_decimal(integer 1) med_iqr_decimal(integer 1) append_label(string) var_lab(string) comment(string) ]
  - if "`if'" != "" | "`in'" != "" {c -(}
  = if "" != "" | "" != "" {c -(}
    preserve
    keep `if'
    {c )-}
  - if "`over'" != "" {c -(}
  = if "" != "" {c -(}
    if "`over_grps'" == "" levelsof `over', local(over_grps)
    if "`overall'" == "first" local over_grps overall `over_grps'
    if "`overall'" == "last" local over_grps `over_grps' overall
    {c )-}
  - if "`over'" == "" local over_grps overall
  = if "" == "" local over_grps overall
  - if "`order'" == "" local order group_over
  = if "" == "" local order group_over
  - local stats_list "N", "missing", "mean_sd", "median_iqr", "range"
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("N", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("mean_sd", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("median_iqr", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("range", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if `range_decimal' ==1 local range_decimal = `decimal'
  = if 1 ==1 local range_decimal = 1
  - if `med_iqr_decimal' ==1 local med_iqr_decimal = `decimal'
  = if 1 ==1 local med_iqr_decimal = 1
  - foreach v in `varlist' {c -(}
  = foreach v in bmi {c -(}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label bmi
  - local var_label `var_label' `append_label'
  = local var_label BMI - you can add extra text
  - local var_label ("`var_label'")
  = local var_label ("BMI - you can add extra text")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** bmi ******" _newline(1)



****** bmi ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su bmi, detail

                             BMI
{hline 61}
      Percentiles      Smallest
 1%    {res} 19.67865        17.3584
{txt} 5%    {res} 21.74364       18.78148
{txt}10%    {res} 22.54486       18.93155       {txt}Obs         {res}        897
{txt}25%    {res}   23.637       19.03281       {txt}Sum of Wgt. {res}        897

{txt}50%    {res}  24.9003                      {txt}Mean          {res} 24.98906
                        {txt}Largest       Std. Dev.     {res} 2.051125
{txt}75%    {res} 26.31453       30.70486
{txt}90%    {res} 27.61133       30.79895       {txt}Variance      {res} 4.207113
{txt}95%    {res} 28.38387       31.06334       {txt}Skewness      {res} .0151219
{txt}99%    {res} 29.94238       31.70209       {txt}Kurtosis      {res} 3.289855
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su bmi if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 25.0 (2.1)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 24.9 (23.6-26.3)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 17.4 - 31.7
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(bmi) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(bmi) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("897")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)") ("17.4 - 31.7")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "no comment" != "" & "no comment" != "no comment" local comment1 ("no comment")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "no comment" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000003 ("BMI - you can add extra text") ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)") ("17.4 - 31.7") ("")
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "no comment" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "no comment" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "no comment" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "no comment" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - if `gap_end' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap_end' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - if "`if'" != "" | "`in'" != "" restore
  = if "" != "" | "" != "" restore
  {hline 61} end pt_sum {hline}

{com}. /***/ pt_sum  qol , postname(`postname') stats(N mean_sd median_iqr range)  comment("You can have different numbers of d.p. for different summaries") decimal(2) range_decimal(0) med_iqr_decimal(1)
{txt}  {hline 59} begin pt_sum {hline}
  - syntax varlist(numeric) [if] [in] , POSTname(string) stats(namelist) [ over(varname) over_grps(numlist) overall(string) order(string) gap(integer 0) gap_end(integer 0) decimal(integer 1) range_decimal(integer 1) med_iqr_decimal(integer 1) append_label(string) var_lab(string) comment(string) ]
  - if "`if'" != "" | "`in'" != "" {c -(}
  = if "" != "" | "" != "" {c -(}
    preserve
    keep `if'
    {c )-}
  - if "`over'" != "" {c -(}
  = if "" != "" {c -(}
    if "`over_grps'" == "" levelsof `over', local(over_grps)
    if "`overall'" == "first" local over_grps overall `over_grps'
    if "`overall'" == "last" local over_grps `over_grps' overall
    {c )-}
  - if "`over'" == "" local over_grps overall
  = if "" == "" local over_grps overall
  - if "`order'" == "" local order group_over
  = if "" == "" local order group_over
  - local stats_list "N", "missing", "mean_sd", "median_iqr", "range"
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("N", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("mean_sd", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("median_iqr", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("range", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if `range_decimal' ==1 local range_decimal = `decimal'
  = if 0 ==1 local range_decimal = 2
  - if `med_iqr_decimal' ==1 local med_iqr_decimal = `decimal'
  = if 1 ==1 local med_iqr_decimal = 2
  - foreach v in `varlist' {c -(}
  = foreach v in qol {c -(}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label qol
  - local var_label `var_label' `append_label'
  = local var_label Quality of life 
  - local var_label ("`var_label'")
  = local var_label ("Quality of life")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** qol ******" _newline(1)



****** qol ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su qol, detail

                       Quality of life
{hline 61}
      Percentiles      Smallest
 1%    {res} 15.52554       6.087381
{txt} 5%    {res} 24.74591       7.690888
{txt}10%    {res}  29.8982       10.20058       {txt}Obs         {res}        905
{txt}25%    {res} 39.80885       12.04689       {txt}Sum of Wgt. {res}        905

{txt}50%    {res} 50.07267                      {txt}Mean          {res} 49.95431
                        {txt}Largest       Std. Dev.     {res} 15.21096
{txt}75%    {res} 60.41745       90.75674
{txt}90%    {res} 69.49487       90.86417       {txt}Variance      {res} 231.3733
{txt}95%    {res} 74.58212       91.56386       {txt}Skewness      {res} .0201611
{txt}99%    {res} 85.91319        99.6441       {txt}Kurtosis      {res} 2.850515
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su qol if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.2f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.2f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.2f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.2f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.2f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.0f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.0f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 49.95 (15.21)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 50.07 (39.81-60.42)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 6 - 100
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(qol) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(qol) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("905")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("49.95 (15.21)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("49.95 (15.21)") ("50.07 (39.81-60.42)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("49.95 (15.21)") ("50.07 (39.81-60.42)") ("6 - 100")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "You can have different numbers of d.p. for different summaries" != "" & "You can have different numbers of d.p. for different summaries" != "no comment" local comment1 ("You can have different numbers of d.p. for different summaries")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "You can have different numbers of d.p. for different summaries" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000003 ("Quality of life") ("905") ("49.95 (15.21)") ("50.07 (39.81-60.42)") ("6 - 100") ("You can have different numbers of d.p. for different summaries")
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "You can have different numbers of d.p. for different summaries" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "You can have different numbers of d.p. for different summaries" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "You can have different numbers of d.p. for different summaries" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "You can have different numbers of d.p. for different summaries" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - if `gap_end' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap_end' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - if "`if'" != "" | "`in'" != "" restore
  = if "" != "" | "" != "" restore
  {hline 61} end pt_sum {hline}

{com}. 
. 
. 
. /**/ pt_sum_close `postname', eg_no(`eg_no')
{txt}  {hline 53} begin pt_sum_close {hline}
  - local dir "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples"
  - syntax namelist, eg_no(numlist max=1)
  - postclose `namelist'
  = postclose __000003
  - use "`dir'\\pts_eg`eg_no'.dta", clear
  = use "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\\pts_eg1.4.dta", clear
  - format _all %-100s
  - qui compress _all
  - qui save "N:\Automating reporting\Git repository\post_table\Testing\pt_sum\Test data\pts_eg`eg_no'.dta", replace
  = qui save "N:\Automating reporting\Git repository\post_table\Testing\pt_sum\Test data\pts_eg1.4.dta", replace
  - qui log close
{smcl}
{txt}{sf}{ul off}