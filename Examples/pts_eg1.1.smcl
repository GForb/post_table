{smcl}
{txt}{sf}{ul off}  - use "`dir'\eg_data2", clear
  = use "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\eg_data2", clear
  - local results pts_eg`eg_no'
  = local results pts_eg1.1
  - tempname postname
  - forvalues i = 1 (1) `cols' {c -(}
  = forvalues i = 1 (1) 5 {c -(}
  - local post_cols `post_cols' col`i'
  = local post_cols  col1
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3 col4
  - {c )-}
  - local post_cols `post_cols' col`i'
  = local post_cols col1 col2 col3 col4 col5
  - {c )-}
  - qui postfile `namelist' str100(`post_cols') using "`dir'\\`results'.dta", replace
  = qui postfile __000000 str100(col1 col2 col3 col4 col5) using "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\pts_eg1.1.dta", replace
  {hline 55} end pt_sum_intro {hline}

{com}. 
. /***
> #1. Default
> ###1.1 Default options
> This is the table obtained using default settings with no additional options specified.
> ***/
. 
. /***/ post `postname' ("") ("N") ("Mean (sd)") ("Median (IQR)") ("Range")
{txt}
{com}. /***/ pt_sum age qol bmi  , postname(`postname') stats(N mean_sd median_iqr range) gap_end(1)
{txt}  {hline 59} begin pt_sum {hline}
  - syntax varlist(numeric) [if] [in] , POSTname(string) stats(namelist) [ over(varname) over_grps(numlist) overall(string) order(string) gap(integer 0) gap_end(integer 0) decimal(integer 1) range_decimal(integer 1) med_iqr_decimal(integer 1) append_label(string) var_lab(string) comment(string) ]
  - if "`if'" != "" | "`in'" != "" {c -(}
  = if "" != "" | "" != "" {c -(}
    preserve
    keep `if'
    {c )-}
  - if "`over'" != "" {c -(}
  = if "" != "" {c -(}
    if "`over_grps'" == "" levelsof `over', local(over_grps)
    if "`overall'" == "first" local over_grps overall `over_grps'
    if "`overall'" == "last" local over_grps `over_grps' overall
    {c )-}
  - if "`over'" == "" local over_grps overall
  = if "" == "" local over_grps overall
  - if "`order'" == "" local order group_over
  = if "" == "" local order group_over
  - local stats_list "N", "missing", "mean_sd", "median_iqr", "range"
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("N", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("mean_sd", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("median_iqr", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("range", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if `range_decimal' ==1 local range_decimal = `decimal'
  = if 1 ==1 local range_decimal = 1
  - if `med_iqr_decimal' ==1 local med_iqr_decimal = `decimal'
  = if 1 ==1 local med_iqr_decimal = 1
  - foreach v in `varlist' {c -(}
  = foreach v in age qol bmi {c -(}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label age
  - local var_label `var_label' `append_label'
  = local var_label Age 
  - local var_label ("`var_label'")
  = local var_label ("Age")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** age ******" _newline(1)



****** age ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su age, detail

                             Age
{hline 61}
      Percentiles      Smallest
 1%    {res}  21.8495       18.73607
{txt} 5%    {res} 28.19199        19.5597
{txt}10%    {res} 31.82518        19.6057       {txt}Obs         {res}      1,000
{txt}25%    {res} 37.72828       20.72693       {txt}Sum of Wgt. {res}      1,000

{txt}50%    {res} 44.58735                      {txt}Mean          {res} 44.75141
                        {txt}Largest       Std. Dev.     {res} 10.09038
{txt}75%    {res} 51.50417       70.68008
{txt}90%    {res} 58.11494       70.92197       {txt}Variance      {res} 101.8157
{txt}95%    {res} 62.07549       77.65178       {txt}Skewness      {res} .0845107
{txt}99%    {res} 67.92893       79.98365       {txt}Kurtosis      {res} 2.822212
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su age if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 44.8 (10.1)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 44.6 (37.7-51.5)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 18.7 - 80.0
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(age) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(age) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("1000")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("44.8 (10.1)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("44.8 (10.1)") ("44.6 (37.7-51.5)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("44.8 (10.1)") ("44.6 (37.7-51.5)") ("18.7 - 80.0")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("Age") ("1000") ("44.8 (10.1)") ("44.6 (37.7-51.5)") ("18.7 - 80.0") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label qol
  - local var_label `var_label' `append_label'
  = local var_label Quality of life 
  - local var_label ("`var_label'")
  = local var_label ("Quality of life")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** qol ******" _newline(1)



****** qol ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su qol, detail

                       Quality of life
{hline 61}
      Percentiles      Smallest
 1%    {res} 15.52554       6.087381
{txt} 5%    {res} 24.74591       7.690888
{txt}10%    {res}  29.8982       10.20058       {txt}Obs         {res}        905
{txt}25%    {res} 39.80885       12.04689       {txt}Sum of Wgt. {res}        905

{txt}50%    {res} 50.07267                      {txt}Mean          {res} 49.95431
                        {txt}Largest       Std. Dev.     {res} 15.21096
{txt}75%    {res} 60.41745       90.75674
{txt}90%    {res} 69.49487       90.86417       {txt}Variance      {res} 231.3733
{txt}95%    {res} 74.58212       91.56386       {txt}Skewness      {res} .0201611
{txt}99%    {res} 85.91319        99.6441       {txt}Kurtosis      {res} 2.850515
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su qol if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 50.0 (15.2)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 50.1 (39.8-60.4)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 6.1 - 99.6
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(qol) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(qol) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("905")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("50.0 (15.2)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("50.0 (15.2)") ("50.1 (39.8-60.4)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("50.0 (15.2)") ("50.1 (39.8-60.4)") ("6.1 - 99.6")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("Quality of life") ("905") ("50.0 (15.2)") ("50.1 (39.8-60.4)") ("6.1 - 99.6") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label bmi
  - local var_label `var_label' `append_label'
  = local var_label BMI 
  - local var_label ("`var_label'")
  = local var_label ("BMI")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** bmi ******" _newline(1)



****** bmi ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su bmi, detail

                             BMI
{hline 61}
      Percentiles      Smallest
 1%    {res} 19.67865        17.3584
{txt} 5%    {res} 21.74364       18.78148
{txt}10%    {res} 22.54486       18.93155       {txt}Obs         {res}        897
{txt}25%    {res}   23.637       19.03281       {txt}Sum of Wgt. {res}        897

{txt}50%    {res}  24.9003                      {txt}Mean          {res} 24.98906
                        {txt}Largest       Std. Dev.     {res} 2.051125
{txt}75%    {res} 26.31453       30.70486
{txt}90%    {res} 27.61133       30.79895       {txt}Variance      {res} 4.207113
{txt}95%    {res} 28.38387       31.06334       {txt}Skewness      {res} .0151219
{txt}99%    {res} 29.94238       31.70209       {txt}Kurtosis      {res} 3.289855
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su bmi if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 25.0 (2.1)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 24.9 (23.6-26.3)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 17.4 - 31.7
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(bmi) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(bmi) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("897")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)") ("17.4 - 31.7")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("BMI") ("897") ("25.0 (2.1)") ("24.9 (23.6-26.3)") ("17.4 - 31.7") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N mean_sd median_iqr range {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - if `gap_end' > 0 {c -(}
  = if 1 > 0 {c -(}
  - forvalues i = 1 (1) `gap_end' {c -(}
  = forvalues i = 1 (1) 1 {c -(}
  - post `postname' ("") `summaries' `comment1'
  = post __000000 ("") ("") ("") ("") ("") 
  - {c )-}
  - {c )-}
  - if "`if'" != "" | "`in'" != "" restore
  = if "" != "" | "" != "" restore
  {hline 61} end pt_sum {hline}

{com}. 
. /***
> Statistics can be arranged in any order
> ***/
. 
. /***/ post `postname' ("") ("N")   ("Range") ("Median (IQR)") ("Mean (sd)")
{txt}
{com}. /***/ pt_sum age qol bmi  , postname(`postname') stats(N range  median_iqr mean_sd)
{txt}  {hline 59} begin pt_sum {hline}
  - syntax varlist(numeric) [if] [in] , POSTname(string) stats(namelist) [ over(varname) over_grps(numlist) overall(string) order(string) gap(integer 0) gap_end(integer 0) decimal(integer 1) range_decimal(integer 1) med_iqr_decimal(integer 1) append_label(string) var_lab(string) comment(string) ]
  - if "`if'" != "" | "`in'" != "" {c -(}
  = if "" != "" | "" != "" {c -(}
    preserve
    keep `if'
    {c )-}
  - if "`over'" != "" {c -(}
  = if "" != "" {c -(}
    if "`over_grps'" == "" levelsof `over', local(over_grps)
    if "`overall'" == "first" local over_grps overall `over_grps'
    if "`overall'" == "last" local over_grps `over_grps' overall
    {c )-}
  - if "`over'" == "" local over_grps overall
  = if "" == "" local over_grps overall
  - if "`order'" == "" local order group_over
  = if "" == "" local order group_over
  - local stats_list "N", "missing", "mean_sd", "median_iqr", "range"
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("N", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("range", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("median_iqr", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if inlist("`s'", "`stats_list'") ==0 {c -(}
  = if inlist("mean_sd", "N", "missing", "mean_sd", "median_iqr", "range") ==0 {c -(}
    di "stats option incorrectly specified. stats must be one of: `stats_list'"
    exit
    {c )-}
  - {c )-}
  - if `range_decimal' ==1 local range_decimal = `decimal'
  = if 1 ==1 local range_decimal = 1
  - if `med_iqr_decimal' ==1 local med_iqr_decimal = `decimal'
  = if 1 ==1 local med_iqr_decimal = 1
  - foreach v in `varlist' {c -(}
  = foreach v in age qol bmi {c -(}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label age
  - local var_label `var_label' `append_label'
  = local var_label Age 
  - local var_label ("`var_label'")
  = local var_label ("Age")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** age ******" _newline(1)



****** age ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su age, detail

                             Age
{hline 61}
      Percentiles      Smallest
 1%    {res}  21.8495       18.73607
{txt} 5%    {res} 28.19199        19.5597
{txt}10%    {res} 31.82518        19.6057       {txt}Obs         {res}      1,000
{txt}25%    {res} 37.72828       20.72693       {txt}Sum of Wgt. {res}      1,000

{txt}50%    {res} 44.58735                      {txt}Mean          {res} 44.75141
                        {txt}Largest       Std. Dev.     {res} 10.09038
{txt}75%    {res} 51.50417       70.68008
{txt}90%    {res} 58.11494       70.92197       {txt}Variance      {res} 101.8157
{txt}95%    {res} 62.07549       77.65178       {txt}Skewness      {res} .0845107
{txt}99%    {res} 67.92893       79.98365       {txt}Kurtosis      {res} 2.822212
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su age if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 44.8 (10.1)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 44.6 (37.7-51.5)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 18.7 - 80.0
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(age) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(age) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("1000")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("18.7 - 80.0")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("18.7 - 80.0") ("44.6 (37.7-51.5)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("1000") ("18.7 - 80.0") ("44.6 (37.7-51.5)") ("44.8 (10.1)")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("Age") ("1000") ("18.7 - 80.0") ("44.6 (37.7-51.5)") ("44.8 (10.1)") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label qol
  - local var_label `var_label' `append_label'
  = local var_label Quality of life 
  - local var_label ("`var_label'")
  = local var_label ("Quality of life")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** qol ******" _newline(1)



****** qol ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su qol, detail

                       Quality of life
{hline 61}
      Percentiles      Smallest
 1%    {res} 15.52554       6.087381
{txt} 5%    {res} 24.74591       7.690888
{txt}10%    {res}  29.8982       10.20058       {txt}Obs         {res}        905
{txt}25%    {res} 39.80885       12.04689       {txt}Sum of Wgt. {res}        905

{txt}50%    {res} 50.07267                      {txt}Mean          {res} 49.95431
                        {txt}Largest       Std. Dev.     {res} 15.21096
{txt}75%    {res} 60.41745       90.75674
{txt}90%    {res} 69.49487       90.86417       {txt}Variance      {res} 231.3733
{txt}95%    {res} 74.58212       91.56386       {txt}Skewness      {res} .0201611
{txt}99%    {res} 85.91319        99.6441       {txt}Kurtosis      {res} 2.850515
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su qol if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 50.0 (15.2)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 50.1 (39.8-60.4)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 6.1 - 99.6
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(qol) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(qol) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("905")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("6.1 - 99.6")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("6.1 - 99.6") ("50.1 (39.8-60.4)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("905") ("6.1 - 99.6") ("50.1 (39.8-60.4)") ("50.0 (15.2)")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("Quality of life") ("905") ("6.1 - 99.6") ("50.1 (39.8-60.4)") ("50.0 (15.2)") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - local var_label `var_lab'
  = local var_label 
  - if "`var_lab'" == "" local var_label:variable label `v'
  = if "" == "" local var_label:variable label bmi
  - local var_label `var_label' `append_label'
  = local var_label BMI 
  - local var_label ("`var_label'")
  = local var_label ("BMI")
  - di _newline(3) "****** `v' ******" _newline(1)
  = di _newline(3) "****** bmi ******" _newline(1)



****** bmi ******

  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - di "Group  `i'"
  = di "Group  overall"
Group  overall
  - if "`i'" == "overall" su `v', detail
  = if "overall" == "overall" su bmi, detail

                             BMI
{hline 61}
      Percentiles      Smallest
 1%    {res} 19.67865        17.3584
{txt} 5%    {res} 21.74364       18.78148
{txt}10%    {res} 22.54486       18.93155       {txt}Obs         {res}        897
{txt}25%    {res}   23.637       19.03281       {txt}Sum of Wgt. {res}        897

{txt}50%    {res}  24.9003                      {txt}Mean          {res} 24.98906
                        {txt}Largest       Std. Dev.     {res} 2.051125
{txt}75%    {res} 26.31453       30.70486
{txt}90%    {res} 27.61133       30.79895       {txt}Variance      {res} 4.207113
{txt}95%    {res} 28.38387       31.06334       {txt}Skewness      {res} .0151219
{txt}99%    {res} 29.94238       31.70209       {txt}Kurtosis      {res} 3.289855
  {txt}- if "`i'" != "overall" su `v' if `over' == `i', detail
  = if "overall" != "overall" su bmi if  == overall, detail
  - local N_`i' = r(N)
  = local N_overall = r(N)
  - foreach s in mean sd {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local mean_overall = string(r(mean), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`decimal'f")
  = local sd_overall = string(r(sd), "%12.1f")
  - {c )-}
  - foreach s in p50 p25 p75 {c -(}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p50_overall = string(r(p50), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p25_overall = string(r(p25), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`med_iqr_decimal'f")
  = local p75_overall = string(r(p75), "%12.1f")
  - {c )-}
  - foreach s in min max{c -(}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local min_overall = string(r(min), "%12.1f")
  - {c )-}
  - local `s'_`i' = string(r(`s'), "%12.`range_decimal'f")
  = local max_overall = string(r(max), "%12.1f")
  - {c )-}
  - local mean_sd_`i' `mean_`i'' (`sd_`i'')
  = local mean_sd_overall 25.0 (2.1)
  - local median_iqr_`i' `p50_`i'' (`p25_`i''-`p75_`i'')
  = local median_iqr_overall 24.9 (23.6-26.3)
  - local range_`i' `min_`i'' - `max_`i''
  = local range_overall 17.4 - 31.7
  - if "`i'" == "overall" qui count if missing(`v') ==.
  = if "overall" == "overall" qui count if missing(bmi) ==.
  - if "`i'" != "overall" qui count if missing(`v') ==. & `over' == `i'
  = if "overall" != "overall" qui count if missing(bmi) ==. &  == overall
  - local missing_`i' = r(N)
  = local missing_overall = r(N)
  - {c )-}
  - if "`order'" == "group_sum" {c -(}
  = if "group_over" == "group_sum" {c -(}
    local summaries ""
    foreach s in `stats' {c -(}
    foreach i in `over_grps' {c -(}
    local summaries `summaries' ("``s'_`i''")
    {c )-}
    {c )-}
    {c )-}
  - if "`order'" == "group_over" {c -(}
  = if "group_over" == "group_over" {c -(}
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries  ("897")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("17.4 - 31.7")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("17.4 - 31.7") ("24.9 (23.6-26.3)")
  - {c )-}
  - local summaries `summaries' ("``s'_`i''")
  = local summaries ("897") ("17.4 - 31.7") ("24.9 (23.6-26.3)") ("25.0 (2.1)")
  - {c )-}
  - {c )-}
  - {c )-}
  - if "`comment'" != "" & "`comment'" != "no comment" local comment1 ("`comment'")
  = if "" != "" & "" != "no comment" local comment1 ("")
  - if "`comment'" == "no comment" local comment1 ("")
  = if "" == "no comment" local comment1 ("")
  - post `postname' `var_label' `summaries' `comment1'
  = post __000000 ("BMI") ("897") ("17.4 - 31.7") ("24.9 (23.6-26.3)") ("25.0 (2.1)") 
  - local summaries ""
  - foreach i in `over_grps' {c -(}
  = foreach i in overall {c -(}
  - foreach s in `stats' {c -(}
  = foreach s in N range median_iqr mean_sd {c -(}
  - local summaries `summaries' ("")
  = local summaries  ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - local summaries `summaries' ("")
  = local summaries ("") ("") ("") ("")
  - if "`comment'" != "" local comment1 ("")
  = if "" != "" local comment1 ("")
  - {c )-}
  - if `gap' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - {c )-}
  - {c )-}
  - if `gap_end' > 0 {c -(}
  = if 0 > 0 {c -(}
    forvalues i = 1 (1) `gap_end' {c -(}
    post `postname' ("") `summaries' `comment1'
    {c )-}
    {c )-}
  - if "`if'" != "" | "`in'" != "" restore
  = if "" != "" | "" != "" restore
  {hline 61} end pt_sum {hline}

{com}. 
. 
. /**/ pt_sum_close `postname', eg_no(`eg_no')
{txt}  {hline 53} begin pt_sum_close {hline}
  - local dir "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples"
  - syntax namelist, eg_no(numlist max=1)
  - postclose `namelist'
  = postclose __000000
  - use "`dir'\\pts_eg`eg_no'.dta", clear
  = use "N:\Automating reporting\Git repository\post_table\Examples\Data and results\All option examples\\pts_eg1.1.dta", clear
  - format _all %-100s
  - qui compress _all
  - qui save "N:\Automating reporting\Git repository\post_table\Testing\pt_sum\Test data\pts_eg`eg_no'.dta", replace
  = qui save "N:\Automating reporting\Git repository\post_table\Testing\pt_sum\Test data\pts_eg1.1.dta", replace
  - qui log close
{smcl}
{txt}{sf}{ul off}